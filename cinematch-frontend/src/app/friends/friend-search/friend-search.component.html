<div class="search-container">
  <div class="back-button">
    <a routerLink="/friends" mat-button>
      <mat-icon>arrow_back</mat-icon> Retour
    </a>
  </div>

  <h1>Rechercher des amis</h1>

  <!-- Barre de recherche -->
  <div class="search-bar">
    <mat-form-field appearance="outline" class="search-field">
      <mat-label>Rechercher un utilisateur</mat-label>
      <input
        matInput
        [(ngModel)]="searchTerm"
        (input)="search()"
        placeholder="Ex: JohnDoe42"
      />
      <mat-icon matSuffix *ngIf="isLoading">hourglass_empty</mat-icon>
    </mat-form-field>
    <button
      mat-flat-button
      color="primary"
      (click)="addFriend()"
      [disabled]="isLoading || !searchResult"
    >
      <mat-icon *ngIf="isLoading">hourglass_empty</mat-icon>
      <span *ngIf="!isLoading">
        {{ searchResult ? 'Ajouter ' + searchResult.username : 'Ajouter' }}
      </span>
    </button>
  </div>

  <!-- Affichage des erreurs -->
  <div *ngIf="error" class="error-message mat-elevation-z1">
    <mat-icon>error</mat-icon>
    <span>{{ error }}</span>
  </div>

  <!-- Résultat de la recherche -->
  <div *ngIf="searchResult" class="search-result mat-elevation-z1">
    <div class="user-avatar">
      <img [src]="searchResult.profilPicture" alt="{{ searchResult.name }}" />
    </div>
    <div class="user-info">
      <h2>{{ searchResult.name }}</h2>
      <p class="username">{{ searchResult.username }}</p>
      <p *ngIf="searchResult.description" class="description">{{ searchResult.description }}</p>
      <div class="user-stats">
        <span class="stat">
          <mat-icon>movie</mat-icon> {{ searchResult.watchedMoviesCount }} films vus
        </span>
        <span class="stat">
          <mat-icon>rate_review</mat-icon> {{ searchResult.reviewsCount }} critiques
        </span>
        <span class="stat">
          <mat-icon>bookmark</mat-icon> {{ searchResult.watchlistCount }} dans la liste
        </span>
      </div>
    </div>
  </div>

  <!-- Message si aucun résultat -->
  <div *ngIf="searchTerm && !searchResult && !isLoading" class="no-result">
    <p>Aucun utilisateur trouvé pour "{{ searchTerm }}"</p>
  </div>
</div>